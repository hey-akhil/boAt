{% load static %}
{% block start %}

<!-- Top Offer Bar -->
<div class="text-center py-2" style="background-color: #ecf0f2; font-family: 'Metropolis', sans-serif;">
  <i>Get additional 5% off on Prepaid orders | Code: <strong>BOATHEAD</strong> |
    <a href="#" style="color: inherit; text-decoration: underline;">Shop Now</a></i>
</div>

<!-- Navbar -->
<nav class="navbar navbar-expand-lg bg-light py-2 shadow-sm">
  <div class="container-fluid d-flex align-items-center justify-content-between">

    <!-- Left: Hamburger & Logo -->
    <div class="d-flex align-items-center">
      <!-- Hamburger (Mobile only) -->
      <button class="navbar-toggler border-0 bg-transparent me-2" type="button"
              data-bs-toggle="collapse" data-bs-target="#navbarSupportedContent"
              aria-controls="navbarSupportedContent" aria-expanded="false" aria-label="Toggle navigation">
        <span class="navbar-toggler-icon"></span>
      </button>

      <!-- Logo -->
      <a class="navbar-brand" href="{% url 'home' %}">
        <img src="{% static 'images/sm_logo.svg' %}" alt="Logo" style="height: 36px;">
      </a>
    </div>

    <!-- Center: Nav Links (collapsible) -->
    <div class="collapse navbar-collapse justify-content-center" id="navbarSupportedContent">
      <ul class="navbar-nav mb-2 mb-lg-0 gap-2">
        {% if request.user.is_authenticated %}
        <li class="nav-item"><a class="nav-link" href="{% url 'profile' %}">Profile</a></li>
        {% endif %}

        <li class="nav-item dropdown">
          <a class="nav-link dropdown-toggle" href="#" role="button"
             data-bs-toggle="dropdown" aria-expanded="false">Categories</a>
          <ul class="dropdown-menu">
            <li><a class="dropdown-item" href="#">Item 1</a></li>
            <li><a class="dropdown-item" href="#">Item 2</a></li>
            <li><a class="dropdown-item" href="#">Item 3</a></li>
          </ul>
        </li>
        <li class="nav-item"><a class="nav-link" href="#">boAt Personalisation</a></li>
        <li class="nav-item"><a class="nav-link" href="#">Corporate Orders</a></li>
        <li class="nav-item"><a class="nav-link" href="#">Gifting Store</a></li>
        <li class="nav-item dropdown">
          <a class="nav-link dropdown-toggle" href="#" role="button"
             data-bs-toggle="dropdown" aria-expanded="false">More</a>
          <ul class="dropdown-menu">
            <li><a class="dropdown-item" href="#">Info 1</a></li>
            <li><a class="dropdown-item" href="#">Info 2</a></li>
            <li><a class="dropdown-item" href="#">Info 3</a></li>
          </ul>
        </li>
      </ul>
    </div>

    <!-- Right: Search + Icons -->
    <div class="d-flex align-items-center gap-3">
      <!-- Desktop Search -->
      <form class="d-none d-lg-flex" style="width: 280px;">
        <input id="searchInput" class="form-control rounded-pill px-4 py-2"
               type="search" placeholder='Search "Earphones, Speakers..."' aria-label="Search"
               style="background-color: #f1f3f5; border: 1px solid #ccc;">
      </form>

      <!-- Mobile Search Toggle -->
      <button class="d-lg-none border-0 bg-transparent" id="mobileSearchToggle" aria-label="Toggle Search">
        <i class="fa-solid fa-magnifying-glass fs-5 text-dark"></i>
      </button>

      {% if request.user.is_authenticated %}
      <!-- Logout Icon -->
      <a href="{% url 'logout' %}" class="text-dark" aria-label="Logout" title="Logout">
        <i class="fa-solid fa-right-from-bracket fs-5"></i>
      </a>
      {% else %}
        <!-- Login Icon -->
        <a href="{% url 'login' %}" class="text-dark" aria-label="Login" title="Login">
          <i class="fa-solid fa-user fs-5"></i>
        </a>
      {% endif %}


      <!-- Cart -->
      <a href="#" class="text-dark" aria-label="Cart">
        <i class="fa-solid fa-cart-shopping fs-5"></i>
      </a>
    </div>
  </div>
</nav>

<!-- Mobile Search Bar -->
<div class="container-fluid bg-light py-2 d-lg-none d-none" id="mobileSearchBar">
  <form class="d-flex px-3">
    <input id="mobileSearchInput" class="form-control rounded-pill px-4 py-2 w-100"
           type="search" placeholder='Search "Earphones, Speakers..."' aria-label="Search"
           style="background-color: #f1f3f5; border: 1px solid #ccc;">
  </form>
</div>

<!-- Bootstrap JS and Scripts -->
<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/js/bootstrap.bundle.min.js"></script>
<script>
  // Mobile search toggle
  const toggleBtn = document.getElementById("mobileSearchToggle");
  const searchBar = document.getElementById("mobileSearchBar");

  toggleBtn.addEventListener("click", () => {
    searchBar.classList.toggle("d-none");
  });

  // Rotating placeholder logic
  const placeholders = [
    'Search "Smartwatch"',
    'Search "Earphone"',
    'Search "Speaker"',
    'Search "Neckband"',
    'Search "Power Bank"',
  ];

  let index = 0;

  function rotatePlaceholder() {
    const desktopInput = document.getElementById("searchInput");
    const mobileInput = document.getElementById("mobileSearchInput");

    if (desktopInput) desktopInput.placeholder = placeholders[index];
    if (mobileInput) mobileInput.placeholder = placeholders[index];

    index = (index + 1) % placeholders.length;
  }

  setInterval(rotatePlaceholder, 3000); // Every 3 seconds
  rotatePlaceholder(); // Initial run
</script>

{% endblock %}
