{% load static %}
{% block start %}

<div class="container-fluid">
  <!-- Top Offer Bar -->
  <div class="text-center py-2" style="background-color: #ecf0f2; font-family: 'Metropolis', sans-serif;">
    <i>Get additional 5% off on Prepaid orders | Code: <strong>BOATHEAD</strong> |
      <a href="#" style="color: inherit; text-decoration: underline;">Shop Now</a></i>
  </div>

  <!-- Navbar -->
  <nav class="navbar navbar-expand-lg bg-light py-2 shadow-sm">
    <div class="container-fluid d-flex align-items-center justify-content-between">

      <!-- Left: Hamburger & Logo -->
      <div class="d-flex align-items-center">
        <button class="navbar-toggler border-0 bg-transparent me-2" type="button"
                data-bs-toggle="collapse" data-bs-target="#navbarSupportedContent"
                aria-controls="navbarSupportedContent" aria-expanded="false" aria-label="Toggle navigation">
          <span class="navbar-toggler-icon"></span>
        </button>

        <a class="navbar-brand" href="{% url 'home' %}">
          <img src="{% static 'images/sm_logo.svg' %}" alt="Logo" style="height: 36px;">
        </a>
      </div>

      <!-- Center: Nav Links -->
      <div class="collapse navbar-collapse justify-content-center" id="navbarSupportedContent">
        <ul class="navbar-nav mb-2 mb-lg-0 gap-2">
         <!-- <li class="nav-item"><a class="nav-link" href="{% url 'home' %}">Home</a></li> -->
          <li class="nav-item"><a class="nav-link" href="{% url 'viewProduct' %}">All Products</a></li>
          <li class="nav-item"><a class="nav-link" href="#">boAt Personalisation</a></li>
          <li class="nav-item"><a class="nav-link" href="#">Corporate Orders</a></li>
          <li class="nav-item"><a class="nav-link" href="{% url 'gift' %}">Gifting Store</a></li>
          {% if request.user.is_authenticated %}
          <li class="nav-item"><a class="nav-link" href="{% url 'profile' %}">Profile</a></li>
          {% endif %}
          <li class="nav-item dropdown">
            <a class="nav-link dropdown-toggle" href="#" role="button"
               data-bs-toggle="dropdown" aria-expanded="false">More</a>
            <ul class="dropdown-menu">
              <li><a class="dropdown-item" href="#">Info 1</a></li>
              <li><a class="dropdown-item" href="#">Info 2</a></li>
              <li><a class="dropdown-item" href="#">Info 3</a></li>
            </ul>
          </li>

          {% if request.user.is_superuser or request.user.is_staff %}
          <li class="nav-item dropdown">
            <a class="nav-link dropdown-toggle" href="#" role="button"
               data-bs-toggle="dropdown" aria-expanded="false">Admin</a>
            <ul class="dropdown-menu">
              <li><a class="dropdown-item" href="{% url 'manage_user' %}">Manage Users</a></li>
              <li><a class="dropdown-item" href="{% url 'manage_products' %}">Manage Product</a></li>
            </ul>
          </li>
          {% endif %}
        </ul>
      </div>

      <!-- Right: Search + Icons -->
      <div class="d-flex align-items-center gap-3">
        <!-- Desktop Search -->
        <form action="{% url 'viewProduct' %}" method="GET" class="d-none d-lg-flex" style="width: 280px;">
          <input name="q" id="searchInput" class="form-control rounded-pill px-4 py-2"
                 type="search" placeholder='Search "Earphones, Speakers..."' aria-label="Search"
                 style="background-color: #f1f3f5; border: 1px solid #ccc;" required>
        </form>

        <!-- Mobile Search Toggle -->
        <button class="d-lg-none border-0 bg-transparent" id="mobileSearchToggle" aria-label="Toggle Search">
          <i class="fa-solid fa-magnifying-glass fs-5 text-dark"></i>
        </button>

        {% if request.user.is_authenticated %}
        <!-- Logout Icon -->
        <a href="{% url 'logout' %}" class="text-dark" aria-label="Logout" title="Logout">
          <i class="fa-solid fa-right-from-bracket fs-5"></i>
        </a>
        {% else %}
        <!-- Login Icon -->
        <a href="{% url 'login' %}" class="text-dark" aria-label="Login" title="Login">
          <i class="fa-solid fa-user fs-5"></i>
        </a>
        {% endif %}

        <!-- Cart -->
        <a href="#" class="text-dark" aria-label="Cart">
          <i class="fa-solid fa-cart-shopping fs-5"></i>
        </a>
      </div>
    </div>
  </nav>

  <!-- Mobile Search Bar -->
  <div class="bg-light py-2 d-lg-none d-none" id="mobileSearchBar">
    <form action="{% url 'viewProduct' %}" method="GET" class="d-flex px-3">
      <input name="q" id="mobileSearchInput" class="form-control rounded-pill px-4 py-2 w-100"
             type="search" placeholder='Search "Earphones, Speakers..."' aria-label="Search"
             style="background-color: #f1f3f5; border: 1px solid #ccc;" required>
    </form>
  </div>
</div>

<!-- Bootstrap JS -->
<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/js/bootstrap.bundle.min.js"></script>
<script src="{% static 'js/navbar.js' %}"></script>

<script>
  document.addEventListener('DOMContentLoaded', function () {
    const mobileToggle = document.getElementById('mobileSearchToggle');
    const mobileSearchBar = document.getElementById('mobileSearchBar');
    if (mobileToggle && mobileSearchBar) {
      mobileToggle.addEventListener('click', () => {
        mobileSearchBar.classList.toggle('d-none');
      });
    }
  });
</script>

{% endblock %}
